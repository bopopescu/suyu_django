# -*-coding:utf-8 -*-import subprocessimport redisimport osimport sysfrom commands import getstatusoutput as gsoimport jsonimport requestsdef cmd_com(command):	status, result = gso(command)	return resultdef main():	role_cmd = "redis-cli info |grep -A 3 Replication|grep role|awk -F ':' '{print$2}'"	role = cmd_com(role_cmd)	alive_cmd = "redis-cli ping"	alive_info = cmd_com(alive_cmd)	if alive_info != 'PONG':		alive = False	else:		alive = True	con_cmd = "redis-cli info|grep connected_clients|awk -F ':' '{print$2}'"	connected = cmd_com(con_cmd)		cmd = "ifconfig |grep -A 1 eth0 |grep inet|awk '{print$2}'"	status, result = status, result = gso(cmd)	ip = result	redisinfo = {	    'ip': ip,                      # 主机ip	    'role': role,                  # 角色	    'alive': alive,                # redis状态	    #'colony':colony,               # 集群状态	    'connected': connected,        # 连接数	    #'men': men,                    # 占用内存	    #'slowlog ': slowlog ,          # 慢查询	    #'latency ': latency ,          # 延时    }	print redisinfo	data = json.dumps(redisinfo)	r = requests.post('http://192.168.2.120/redisreport', data=data)	print r.status_code    if __name__ == '__main__':    main()            