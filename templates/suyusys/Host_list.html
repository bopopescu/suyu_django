{% extends "newindex.html" %}{% block nav_host_list %}active{% endblock %}{% block nav_host %}active{% endblock %}{% block head %}    <link href="/static/css/saltstack/plugins/dataTables/datatables.min.css" rel="stylesheet">{% endblock %}{% block re_content %}<div class="row">    <div class="col-lg-12">        <div class="ibox float-e-margins">            <div class="ibox-title">                <h5>主机详情</h5>            </div>            <div class="ibox-content">                <div class="row">                    <div class="col-sm-2">                        <div class="form-inline">                            <div class="input-group">                                <div class="input-group-addon">平台：</div>                                <select class="form-control" name="country" id="country">                                    <option value="all">所有平台</option>                                    {% for game in country %}                                        {% if game == req %}                                        <option value="{{ game }}" selected="selected">{{ game }}</option>                                        {% else %}                                        <option value="{{ game }}">{{ game }}</option>                                        {% endif %}                                    {% endfor %}                                </select>                            </div>                        </div>                    </div>                    <div class="col-sm-2">                        <div class="form-inline">                            <div class="input-group">                                <div class="input-group-addon">是否退还：</div>                                <select class="form-control" name="country" id="hostexit">                                    <option value="all">所有主机</option>                                    <option value="1" {% if het == '1' %}selected="selected"{% endif %}>已退机器</option>                                    <option value="0" {% if het == '0' %}selected="selected"{% endif %}>未退机器</option>                                </select>                            </div>                        </div>                    </div>                    <div class="col-sm-2">                        <div class="form-inline">                            <div class="input-group">                                <div class="input-group-addon">是否可用：</div>                                <select class="form-control" name="country" id="hostuse">                                    <option value="all">所有主机</option>                                    <option value="1">不可用机器</option>                                    <option value="0">可用机器</option>                                </select>                            </div>                        </div>                    </div>                    <div class="col-sm-4"></div>                    <div class="col-sm-2"></div>                </div>            </div>        </div>    </div></div><div class="row">    <div class="col-lg-12">        <div class="ibox float-e-margins">            <div class="ibox-content">                <div class="table-responsive">                    <table class="table table-striped table-bordered table-hover dataTables-example" >                    <thead>                    <tr>                        <th>序号</th>                        <th>country</th>                        <th>主机名</th>                        <th>外网ip</th>                        <th>内网ip</th>                        <th>最大区服数</th>                        <th>已装区服数</th>                        <th>添加时间</th>                        <th>是否退还</th>                        <th>是否可用</th>                    </tr>                    </thead>                    <tbody>                    {% for game in host_list %}                    <tr {% if game.hostexit %} class="danger" {% elif game.hostuse %} class="warning"{% endif %}>                        <td>{{ forloop.counter }}</td>                        <td>{{ game.country }}</td>                        <td><a href="/Host_info/?ip={{ game.hostWanIp }}">{{ game.hostName }}</a></td>                        <td>{{ game.hostWanIp }}</td>                        <td>{{ game.hostLanIp }}</td>                        <td>{{ game.hostLimit }}</td>                        <td>{{ game.merge }}</td>                        <td>{{ game.hostAddTime }}</td>                        <td>                            {% if not game.hostexit %}                            <div class="switch">                                <div class="onoffswitch">                                    <input type="checkbox" checked class="onoffswitch-checkbox" id="example{{ forloop.counter }}" value="{{ game.id }}" action="off">                                    <label class="onoffswitch-label" for="example{{ forloop.counter }}">                                        <span class="onoffswitch-inner"></span>                                        <span class="onoffswitch-switch"></span>                                    </label>                                </div>                            </div>                            {% else %}                            <div class="switch">                                <div class="onoffswitch">                                    <input type="checkbox" class="onoffswitch-checkbox" id="example{{ forloop.counter }}" value="{{ game.id }}" action="on">                                    <label class="onoffswitch-label" for="example{{ forloop.counter }}">                                        <span class="onoffswitch-inner"></span>                                        <span class="onoffswitch-switch"></span>                                    </label>                                </div>                            </div>                            {% endif %}                        </td>                        <td>                            {% if not game.hostuse %}                            <div class="switch">                                <div class="onoffswitch">                                    <input type="checkbox" checked class="onoffswitch-checkbox" id="example{{ forloop.counter|add:'20' }}" value="{{ game.id|add:'10000' }}" action="off">                                    <label class="onoffswitch-label" for="example{{ forloop.counter|add:'20' }}" >                                        <span class="onoffswitch-inner"></span>                                        <span class="onoffswitch-switch"></span>                                    </label>                                </div>                            </div>                            {% else %}                            <div class="switch">                                <div class="onoffswitch">                                    <input type="checkbox" class="onoffswitch-checkbox" id="example{{ forloop.counter|add:'20' }}" value="{{ game.id|add:'10000' }}" action="on">                                    <label class="onoffswitch-label" for="example{{ forloop.counter|add:'20' }}">                                        <span class="onoffswitch-inner"></span>                                        <span class="onoffswitch-switch"></span>                                    </label>                                </div>                            </div>                            {% endif %}                        </td>                    </tr>                    {% endfor %}                    </tbody>                    <tfoot>                    <tr>                        <th>序号</th>                        <th>country</th>                        <th>主机名</th>                        <th>外网ip</th>                        <th>内网ip</th>                        <th>最大区服数</th>                        <th>已装区服数</th>                        <th>添加时间</th>                        <th>是否退还</th>                        <th>是否可用</th>                    </tr>                    </tfoot>                    </table>                </div>            </div>        </div>    </div></div>{% endblock %}{% block js %}    <script src="/static/js/saltstack/plugins/dataTables/datatables.min.js"></script>    <script src="/static/js/saltstack/plugins/nestable/jquery.nestable.js"></script>    <script src="/static/js/saltstack/plugins/switchery/switchery.js"></script>{% endblock %}{% block scripts %}    <script>        $(document).ready(function(){            $('.dataTables-example').DataTable({                pageLength: 25,                responsive: true,                dom: '<"html5buttons"B>lTfgitp',                buttons: [                    { extend: 'copy'},                    {extend: 'csv'},                    {extend: 'excel', title: 'ExampleFile'},                    {extend: 'pdf', title: 'ExampleFile'},                    {extend: 'print',                     customize: function (win){                        $(win.document.body).addClass('white-bg');                        $(win.document.body).css('font-size', '10px');                        $(win.document.body).find('table')                            .addClass('compact')                            .css('font-size', 'inherit');                    }                    }                ]            });        });    </script>    <script>        $("#country").change(function(){        var country = $(this).find("option:selected").val();            console.log(country)        var url = "{% url 'Host_list' %}" + '?country='+country;            console.log(url)        location.href = url;        })        $("#hostexit").change(function(){        var hostexit = $(this).find("option:selected").val();            console.log(hostexit)        var country = $("#country option:selected").val()            console.log(country)        var url = "{% url 'Host_list' %}" + '?country='+country +'&hostexit='+hostexit;            console.log(url)        location.href = url;        })        $("#hostuse").change(function(){        var hostuse = $(this).find("option:selected").val();            console.log(hostuse)        var country = $("#country option:selected").val()            console.log(country)        var hostexit = $("#hostexit option:selected").val()            console.log(hostexit)        var url = "{% url 'Host_list' %}" + '?country='+country +'&hostexit='+hostexit+'&hostuse='+hostuse;            console.log(url)        location.href = url;        })    </script>    <script>    $(document).on("click", "input", function (e) {        var id = $(e.target).attr("value");        console.log(id)        var action = $(e.target).attr("action");        console.log(action)        $.ajax({            type: "post",            url: "alter_host_status_api",            data: JSON.stringify({'id': id, 'action': action}),            datatype: 'json',            success: function (data) {                console.log(data.msg)                console.log(data.status)                if (data.status == '1'){                    toastr.success(data.msg)                }                else {                    toastr.error(data.msg)                }            }        })    })    </script>{% endblock %}